{"version":3,"sources":["components/minesweeper-level-selector.js","components/three-digit-counter.js","components/minesweeper-smiley-button.js","components/minesweeper-header.js","components/minesweeper-cell.js","components/minesweeper-board.js","components/minesweeper-game.js","model/matrix.js","model/minesweeper-cell-model.js","model/minesweeper-board-model.js","model/timer-model.js","model/three-digit-counter-model.js","model/smiley-button-model.js","model/minesweeper-header-model.js","model/minesweeper-mines-field-model.js","model/minesweeper-game-model.js","model/mouse-model.js","index.js"],"names":["LevelSelector","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","doSelection","bind","assertThisInitialized","determineItemClassName","choice","classNames","active","selectedChoice","dificulty","innitGameCallback","_this2","choices","react_default","a","createElement","className","style","backgroundColor","id","map","role","onClick","key","href","startCase","React","Component","ThreeDigitCounter","_this$props","getNthDigit","model","backgroundImage","concat","MinesweeperSmileyButton","getStyles","margin","marginLeft","marginRight","marginTop","marginBottom","getState","onMouseDown","onMouseUp","onMouseOut","MinesweeperHeader","w","headerModel","width","parseInt","_this$props$headerMod","minesCounter","smileyButton","timeCounter","line","range","three_digit_counter","minesweeper_smiley_button","calcMargin","MinesweeperCell","mouse","determineClassName","getKey","data","onContextMenu","e","preventDefault","catchMouseDown","catchMouseUp","catchMouseOut","onMouseOver","catchMouseOver","MinesweeperBoard","_this$props$game$boar","game","board","h","height","b","divs","y","push","x","minesweeper_cell","get","i","MinesweeperGame","gameSettings","calcStyle","minesweeper_header","header","minesweeper_board","Matrix","set","value","isValidCoordinate","getCoordinateIndex","setByIndex","index","size","getByIndex","length","print","stringBuilder","j","v","console","log","Array","MinesweeperCellModel","state","setState","newState","fireEvent","setBlank","setOpen","number","setPressed","setFlagged","setBombRevealed","setBombMisflaged","setBombDeath","isBlank","isFlagged","isPressed","isOpen","startsWith","eventName","sender","eventHandlers","callback","err","getNumber","substr","addEventHandler","eventHandler","MinesweeperBoardModel","initCells","cells","getCells","pressSquare","el","releasePressedCells","forEach","cell","setEventHandlers","children","onStateChanged","numOfFlaggedCellsAround","num","openCellsLeft","Timer","initTime","thickPeriod","doThick","timeout","setTimeout","incThicks","isRunning","incVal","newThicksVal","thicks","setTime","timeVal","getTime","status","start","stop","clearTimeout","ThreeDigitCounterModel","isNegative","pow","Math","ret","abs","inc","newNumber","canDisplay","setNumber","decr","decrVal","displVal","numVal","SmileyButtonModel","setSmile","setWin","setDead","setOoh","MinesweeperHeaderModel","minesCnt","childs","onSmileyButtonClicked","timer","onTimeChanged","MinesweeperMinesFieldModel","init","randomizeMines","calculateNumbers","cnt","field","minesArr","array","temporaryValue","randomIndex","currentIndex","floor","random","shuffleArray","m","MinesweeperGameModel","mines","restartGame","settings","startGame","fx","fy","loseGame","winGame","mouseController","s","isLeftButtonPressed","isRightButtonPressed","handleMouseAction","leftButtonPressedElement","c","getCordsOfCell","isGameOver","target","getCordsOfField","coords","attributes","nodeValue","split","action","hostElement","leftClickDone","rightClickDone","rightButtonPressedElement","releaseButtons","doubleClickDone","recursive","indexOf","MouseModel","setLeftButtonPressed","setRightButtonPressed","setHostElement","element","nativeEvent","which","setMiddleButtonPressed","MinesweeperApp","onDifficultySelected","levelsAvailable","selectedLevel","scores","easy","intermediate","expert","mouseUp","mouseDown","mouseOut","mouseOver","dif","_this$state","minesweeper_level_selector","keys","minesweeper_game","ReactDOM","render","src_MinesweeperApp","document","getElementById"],"mappings":"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","file":"static/js/main.624b17bd.chunk.js","sourcesContent":["import React from 'react';\nimport { startCase } from 'lodash';\nimport classNames from 'classnames';\nimport 'bootstrap/dist/css/bootstrap.css';\n\n\nclass LevelSelector extends React.Component {\n\n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.doSelection = this.doSelection.bind(this);\n\t\tthis.determineItemClassName = this.determineItemClassName.bind(this);\n\t}\n\n\tdetermineItemClassName(choice) {\n\t\treturn classNames('nav-item', { active: choice === this.props.selectedChoice });\n\t}\n\n\tdoSelection(dificulty){\n\t\tthis.props.innitGameCallback(dificulty);\n\t}\n\n\trender() {\n\t\tconst { choices } = this.props;\n\t\treturn (\n\t\t\t<nav className=\"navbar navbar-expand-lg navbar-light\" style={{ backgroundColor: '#e3f2fd' }}>\n\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarText\">\n\t\t\t\t\t<ul className=\"navbar-nav mr-auto\">\n\t\t\t\t\t  {choices.map(choice => (\n\t\t\t\t\t\t\t<li role=\"presentation\" className={this.determineItemClassName(choice)} \n\t\t\t\t\t\t\t\tonClick={() => this.doSelection(choice)} key={choice}>\n\t\t\t\t\t\t\t\t<a className=\"nav-link\" href=\"#\">{startCase(choice)}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t  ))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t\t);\n\t}\n}\n\nexport default LevelSelector;","import React from 'react';\n\nclass ThreeDigitCounter extends React.Component {\n\t/**\n\t\tprops:\n\t\t\tmodel: \t[ThreeDigitCounterModel]\n\t*/\n\trender(){\n\t\tconst {\n\t\t\tid,\n\t\t\tmodel: { getNthDigit },\n\t\t} = this.props;\n\t\treturn (\n\t\t\t<div style={{'backgroundImage':'none'}}>\n\t\t\t\t<div className={`time${getNthDigit(1)}`} id={id+\"_hundreds\"} />\n\t\t\t\t<div className={`time${getNthDigit(2)}`} id={id+\"_tens\"} />\n\t\t\t\t<div className={`time${getNthDigit(3)}`} id={id+\"_ones\"} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default ThreeDigitCounter;","import React from 'react';\n\nclass MinesweeperSmileyButton extends React.Component {\n\t/**\n\t\tprops:\n\t\t\tmodel: \t[SmileyButtonModel]\n\t\t\tmargin: [int] \n\t*/\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.getStyles = this.getStyles.bind(this);\n\t}\n\n\tgetStyles(){\n\t\tconst { margin } = this.props;\n\t\treturn {\n\t\t\t\"marginLeft\": `${margin}px`,\n\t\t\t\"marginRight\": `${margin}px`,\n\t\t\t\"marginTop\": \"3px\",\n\t\t\t\"marginBottom\": \"3px\"\n\t\t};\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div style={{'backgroundImage':'none'}}>\n\t\t\t\t<div id=\"smiley\"\n\t\t\t\t\tclassName={this.props.model.getState()} style={this.getStyles()}\n\t\t\t\t\tonMouseDown={this.props.model.onMouseDown}\n\t\t\t\t\tonMouseUp={this.props.model.onMouseUp}\n\t\t\t\t\tonMouseOut={this.props.model.onMouseOut}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MinesweeperSmileyButton;","import React from 'react';\nimport ThreeDigitCounter from './three-digit-counter.js';\nimport MinesweeperSmileyButton from './minesweeper-smiley-button.js';\nimport { range } from 'lodash';\n\nclass MinesweeperHeader extends React.Component {\n\t/**\n\t\tprops:\n\t\t\theaderModel \t[HeaderModel]\n\t\t\tmouse \t\t\t[MouseModel]\n\t*/\n\n\tcalcMargin(){\n\t\tconst w = this.props.headerModel.width;\n\t\tconst margin = parseInt((w*16-90-26) / 2);\n\t\treturn margin;\n\t}\n\t\n\trender(){\n\t\tconst {\n\t\t\theaderModel: {\n\t\t\t\twidth,\n\t\t\t\tminesCounter,\n\t\t\t\tsmileyButton,\n\t\t\t\ttimeCounter,\n\t\t\t},\n\t\t} = this.props;\n\t\tconst line = range(width).map(key => <div key={key} className=\"bordertb\" />);\n\n\t\treturn (\n\t\t\t<div className=\"msw-header\">\n\t\t\t\t<div className=\"bordertl\" />{line}<div className=\"bordertr\" />\n\t\t\t\t<div className=\"borderlrlong\"/>\n\t\t\t\t<ThreeDigitCounter model={minesCounter} id=\"mines\" />\n\t\t\t\t<MinesweeperSmileyButton model={smileyButton} margin={this.calcMargin()} />\n\t\t\t\t<ThreeDigitCounter model={timeCounter} id=\"seconds\"/>\n\t\t\t\t<div className=\"borderlrlong\"/>\n\t\t\t\t<div className=\"borderjointl\" />{line}<div className=\"borderjointr\" />\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MinesweeperHeader;","import React from 'react';\n\nclass MinesweeperCell extends React.Component {\n\t/**\n\t\tprops:\n\t\t\tmodel \t[MinesweeperCellModel]\n\t\t\tmouse \t[MouseModel]\n\t*/\n\n\tdetermineClassName(){\n\t\treturn `square ${this.props.model.getState()}`;\n\t}\n\n\trender(){\n\t\tconst {\n\t\t\tmodel,\n\t\t\tmouse,\n\t\t} = this.props;\n\t\treturn (\n\t\t\t<div className={this.determineClassName()} key={model.getKey()} \n\t\t\t\tdata={model.getKey()}\n\t\t\t\tonContextMenu={e => {e.preventDefault();}}\n\t\t\t\tonMouseDown={mouse.catchMouseDown}\n\t\t\t\tonMouseUp={mouse.catchMouseUp} \n\t\t\t\tonMouseOut={mouse.catchMouseOut}\n\t\t\t\tonMouseOver={mouse.catchMouseOver} />\n\t\t); \n\t}\n}\n\nexport default MinesweeperCell;","import React from 'react';\nimport MinesweeperCell from './minesweeper-cell.js';\nimport { range } from 'lodash';\nclass MinesweeperBoard extends React.Component {\n\t/**\n\t\tprops:\n\t\t\tgame  \t[MinesweeperGameModel],\n\t\t\tmouse \t[MouseModel]\n\t*/\n\t\n\trender(){\n\t\tconst { height: h, width: w } = this.props.game.board;\n\t\tconst b =  (key) => (<div key={key} className=\"borderlr\" />);\n\t\tvar divs = [];\n\t\tfor (var y=0; y<h; y++){\n\t\t\tdivs.push(b(`${y}-l`));\n\t\t\tfor (var x=0; x<w; x++){\n\t\t\t\tdivs.push(\n\t\t\t\t\t(<MinesweeperCell model={this.props.game.board.get(x,y)}  \n\t\t\t\t\t\tmouse={this.props.mouse} key={`${y}-${x}`}/>));\n\t\t\t}\n\t\t\tdivs.push(b(`${y}-r`));\n\t\t}\n\t\tconst line = range(w).map(i => <div key={i} className=\"bordertb\" />);\n\t\treturn (\n\t\t\t<div className=\"minesweeper-board\" >\n\t\t\t\t{divs}\n\t\t\t\t<div className=\"borderbl\" />{line}<div className=\"borderbr\" />\t\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MinesweeperBoard;","import React from 'react';\nimport MinesweeperHeader from './minesweeper-header.js';\nimport MinesweeperBoard from './minesweeper-board.js';\n\nconst BORDER_WIDTH = 10;\nconst BORDER_HEIGHT = 10;\nconst FIELD_WIDTH = 16;\nconst FIELD_HEIGHT = 16;\nconst HEADER_HEIGHT = 32;\n\nclass MinesweeperGame extends React.Component {\n\t/**\n\t\tprops:\n\t\t\tgame  \t[MinesweeperGameModel],\n\t\t\tmouse \t[MouseModel]\n\t*/\n\n\tcalcStyle(){\n\t\tconst widthFieldsNum = this.props.game.gameSettings.width;\n\t\tconst heightFieldsNum = this.props.game.gameSettings.height;\n\t\tconst width = 2 * BORDER_WIDTH + widthFieldsNum * FIELD_WIDTH;\n\t\tconst height = 3 * BORDER_HEIGHT + FIELD_HEIGHT * heightFieldsNum + HEADER_HEIGHT;\n\t\treturn { width, height };\n\t}\n\n\trender(){\n\t\tconst { game, mouse } = this.props;\n\t\treturn (\n\t\t\t<div id=\"game\" style={this.calcStyle()}  className='msw' >\n\t\t\t\t<MinesweeperHeader headerModel={game.header} mouse={mouse}/>\n\t\t\t\t<MinesweeperBoard game={game} mouse={mouse}/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default MinesweeperGame;","\nvar Matrix = function(w, h){\n\n\tthis.set = function(x, y, value){\n\t\tif (!this.isValidCoordinate(x,y)){\n\t\t\treturn false;\n\t\t}\n\t\tthis.data[this.getCoordinateIndex(x, y)] = value;\n\t\treturn true;\n\t}.bind(this);\n\n\tthis.setByIndex = function(index, value){\n\t\tif (index>=this.size()) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.data[index] = value;\n\t\treturn true;\n\t}.bind(this);\n\n\tthis.getByIndex = function(index){\n\t\tif (index>=this.size()) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.data[index];\n\t}.bind(this);\n\n\tthis.get = function(x, y){\n\t\tif (!this.isValidCoordinate(x,y)){\n\t\t\treturn null;\n\t\t}\n\t\treturn this.data[this.getCoordinateIndex(x,y)];\n\t}.bind(this);\n\n\tthis.getCoordinateIndex = function(x, y){\n\t\tif (!this.isValidCoordinate(x,y)){\n\t\t\treturn null;\n\t\t}\n\t\treturn y*this.width+x;\n\t}.bind(this);\n\n\tthis.isValidCoordinate = function(x, y){\n\t\tif (x<0 || x>=this.width) return false;\n\t\tif (y<0 || y>=this.height) return false;\n\t\treturn true;\n\t}.bind(this);\n\n\tthis.size = function(){\n\t\treturn this.data.length;\n\t}.bind(this);\n\n\tthis.print = function(){\n\t\tfor(var i=0; i<this.width; i++){\n\t\t\tvar stringBuilder = \"\";\n\t\t\tfor(var j=0; j<this.height; j++){\n\t\t\t\tvar v = this.get(i,j);\n\t\t\t\tif (typeof v==='undefined') {\n\t\t\t\t\tv = 'u';\n\t\t\t\t}\n\t\t\t\tstringBuilder = stringBuilder + v + \" \";\n\t\t\t}\n\t\t\tconsole.log(stringBuilder);\n\t\t}\n\t}.bind(this);\n\n\t/////////// Constructor ////////////\n\tthis.width = w;\n\tthis.height = h;\n\tthis.data = new Array(w * h); \n}\n\nexport default Matrix","var MinesweeperCellModel = function(x, y, state){\n\n\tthis.setState = function(newState){\n\t\tthis.state = newState;\n\t\tthis.fireEvent(\"onStateChanged\", {});\n\t}.bind(this);\n\n\tthis.getState = function(){\n\t\treturn this.state;\n\t}.bind(this);\n\n\tthis.setBlank = function(){\n\t\tthis.setState(\"blank\");\n\t}.bind(this);\n\n\tthis.setOpen = function(number){\n\t\tif (typeof number === 'undefined'){\n\t\t\tnumber = 0;\n\t\t}\n\t\tthis.setState(\"open\"+number);\n\t}.bind(this);\n\n\tthis.setPressed = function(){\n\t\tthis.setState(\"pressed\");\n\t}.bind(this);\n\n\tthis.setFlagged = function(){\n\t\tthis.setState(\"bombflagged\");\n\t}.bind(this);\n\n\tthis.setBombRevealed = function(){\n\t\tthis.setState(\"bombrevealed\");\n\t}.bind(this);\n\n\tthis.setBombMisflaged = function(){\n\t\tthis.setState(\"bombmisflagged\");\n\t}.bind(this);\n\n\tthis.setBombDeath = function(){\n\t\tthis.setState(\"bombdeath\");\n\t}.bind(this);\n\n\tthis.getKey = function(){\n\t\treturn this.x+\"_\"+this.y;\n\t}.bind(this);\n\n\tthis.isBlank = function(){\n\t\treturn this.state === 'blank';\n\t}.bind(this);\n\n\tthis.isFlagged = function(){\n\t\treturn this.state === 'bombflagged';\n\t}.bind(this);\n\n\tthis.isPressed = function(){\n\t\treturn this.state === 'pressed';\n\t}.bind(this);\n\n\tthis.isOpen = function(){\n\t\treturn this.state.startsWith('open');\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e, sender){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.getNumber = function(x, y){\n\t\tif (!this.isOpen){\n\t\t\treturn -1;\n\t\t}\n\t\tvar state = this.getState();\n\t\treturn parseInt(state.substr(state.length - 1));\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\t///////////// Constructor ///////////////\n\tthis.eventHandlers = [];\n\tthis.x = x;\n\tthis.y = y;\n\tvar defaultState = \"blank\";\n\tthis.state = typeof state === 'undefined' ? defaultState : state;\n}\n\nexport default MinesweeperCellModel;","import Matrix from './matrix.js';\nimport MinesweeperCellModel from './minesweeper-cell-model.js';\n\nvar MinesweeperBoardModel = function(width, height){\n\n\tthis.initCells = function(width, height){\n\t\tthis.cells = new Matrix(width, height);\n\t\tfor(var i=0; i<width; i++){\n\t\t\tfor(var j=0; j<height; j++){\n\t\t\t\tthis.cells.set(i, j,\n\t\t\t\t\tnew MinesweeperCellModel(i,j)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}.bind(this);\n\n\tthis.get = function(x,y){\n\t\treturn this.cells.get(x,y);\n\t}.bind(this);\n\n\tthis.getCells = function(){\n\t\treturn this.cells;\n\t}.bind(this);\n\n\tthis.getByIndex = function(index){\n\t\treturn this.cells.getByIndex(index);\n\t}.bind(this);\n\n\tthis.pressSquare = function(x, y){\n\t\tfor(var i=0; i<this.width; ++i){\n\t\t\tfor(var j=0; j<this.height; ++j){\n\t\t\t\tvar el = this.get(i,j);\n\t\t\t\tif(i>=x-1 && i<=x+1 && j>=y-1 && j<=y+1){\n\t\t\t\t\tif (el.isBlank()){\n\t\t\t\t\t\tel.setPressed();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (el.isPressed()){\n\t\t\t\t\t\tel.setBlank();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}.bind(this);\n\n\tthis.releasePressedCells = function(){\n\t\tthis.getCells().data.forEach(function(cell){\n\t\t\tif (cell.getState()==='pressed'){\n\t\t\t\tcell.setBlank();\n\t\t\t}\n\t\t});\n\t}.bind(this);\n\n\tthis.isValidCoordinate = function(x, y){\n\t\tif (x<0 || x>=this.width) return false;\n\t\tif (y<0 || y>=this.height) return false;\n\t\treturn true;\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\tthis.setEventHandlers = function(){\n\t\tthis.children.forEach( function(el){\n\t\t\t\tel.addEventHandler({\n\t\t\t\t\t\"onStateChanged\": function(eventName, e, sender){\n\t\t\t\t\t\tthis.fireEvent(eventName,e,this);\n\t\t\t\t\t}.bind(this)\n\t\t\t\t});\n\t\t\t}.bind(this)\n\t\t);\n\t}.bind(this);\n\n\tthis.numOfFlaggedCellsAround = function(x, y) {\n\t\tvar num = 0;\n\t\tfor (var i=x-1; i<=x+1; i++){\n\t\t\tfor(var j=y-1; j<=y+1; j++){\n\t\t\t\tvar cell = this.get(i,j);\n\t\t\t\tif (cell!=null && cell.isFlagged()){\n\t\t\t\t\tnum++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn num;\n\t}.bind(this);\n\n\t/////////// Constructor ////////////\n\tthis.eventHandlers = [];\n\tthis.width = width;\n\tthis.height = height;\n\tthis.openCellsLeft = width * height;\n\tthis.initCells(width, height);\n\tthis.children = this.cells.data;\n\tthis.setEventHandlers();\n}\n\nexport default MinesweeperBoardModel;","var Timer = function(initTime, thickPeriod){\n\n\tthis.doThick = function(){\n\t\tthis.timeout = setTimeout(\n\t\t\tfunction() {\n\t\t\t\tthis.incThicks();\n\t\t\t\tif (this.isRunning()){\n\t\t\t\t\tthis.doThick.bind(this)();\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tthis.thickPeriod\n\t\t);\n\t}.bind(this);\n\n\tthis.incThicks = function(incVal){\n\t\tif(typeof incVal === 'undefined')\n\t\t\tincVal = 1;\n\t\tvar newThicksVal = this.thicks>=999? 999 : this.thicks+1;\n\t\tthis.setTime(newThicksVal);\n\t}.bind(this);\n\n\tthis.setTime = function(timeVal){\n\t\tif (typeof timeVal === 'undefined'){\n\t\t\ttimeVal = 0;\n\t\t}\n\t\tthis.thicks = timeVal;\n\t\tthis.fireEvent(\"onTimeChanged\");\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.getTime = function(){\n\t\treturn this.thicks;\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\t\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\tthis.isRunning = function(){\n\t\treturn this.status === 'running';\n\t}.bind(this);\n\n\tthis.start = function(){\n\t\tthis.status = 'running';\n\t\tthis.doThick();\n\t}.bind(this);\n\n\tthis.stop = function(){\n\t\tclearTimeout(this.timeout);\n\t\tthis.status = 'stopped';\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e, sender){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\t///////////// Constructor ///////////////\n\tthis.eventHandlers = [];\n\tthis.thickPeriod = typeof thickPeriod === 'undefined' ? 1000 : thickPeriod;\n\tthis.thicks = typeof initTime === 'undefined' ? 0 : initTime;\n\tthis.status = 'stopped';\n}\n\nexport default Timer;","var ThreeDigitCounterModel = function(number){\n\n\tthis.getNthDigit = function(index){\n\t\tif (index === 1 && this.isNegative()){\n\t\t\treturn \"-\";\n\t\t} \n\t\tvar pow = Math.pow(10, 3 - index);\n\t\tvar ret = parseInt(this.number / (pow)) % 10;\n\t\treturn Math.abs(ret);\n\t}.bind(this);\n\n\tthis.inc = function(incVal){\n\t\tif(typeof incVal === 'undefined')\n\t\t\tincVal = 1;\n\t\tvar newNumber = this.number + incVal;\n\t\tif (this.canDisplay(newNumber)){\n\t\t\tthis.setNumber(newNumber);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}.bind(this);\n\n\tthis.decr = function(decrVal){\n\t\tif(typeof decrVal === 'undefined')\n\t\t\tdecrVal = 1;\n\t\treturn this.inc(-1 * decrVal);\n\t}.bind(this);\n\n\tthis.canDisplay = function(displVal){\n\t\treturn displVal > -100 && displVal<1000;\n\t};\n\n\tthis.isNegative = function(){\n\t\treturn this.number < 0;\n\t}.bind(this);\n\n\tthis.setNumber = function(numVal){\n\t\tthis.number = numVal;\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e){\n\t\tfor(var i = 0; i < this.eventHandlers.length; i++){\n\t\t\ttry {\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\t/////////// Constructor ////////////\n\tthis.eventHandlers = [];\n\tif (typeof number === 'undefined'){\n\t\tnumber = 0;\n\t}\n\tthis.number = number;\n}\n\nexport default ThreeDigitCounterModel;","var SmileyButtonModel = function(){\n\n\tthis.setState = function(state){\n\t\tthis.state = state\n\t\tthis.fireEvent(\"onStateChanged\");\n\t\treturn this;\n\t}.bind(this);\n\n\tthis.setSmile = function(){\n\t\tthis.setState(\"facesmile\");\n\t\treturn this;\n\t}\n\n\tthis.setPressed = function(){\n\t\tthis.setState(\"facepressed\");\n\t\treturn this;\n\t}.bind(this);\n\n\tthis.setWin = function(){\n\t\tthis.setState(\"facewin\");\n\t\treturn this;\n\t}\n\n\tthis.setDead = function(){\n\t\tthis.setState(\"facedead\");\n\t\treturn this;\n\t}\n\n\tthis.setOoh = function(){\n\t\tthis.setState(\"faceooh\")\n\t\treturn this;\n\t}\n\n\tthis.getState = function(){\n\t\treturn this.state;\n\t}\n\n\tthis.isPressed = function(){\n\t\treturn this.getState() === 'facepressed';\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e, sender){\n\t\tfor(var i = 0; i < this.eventHandlers.length; i++){\n\t\t\ttry {\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.onMouseDown = function(e){\n\t\tthis.setPressed();\n\t\treturn this;\n\t}.bind(this);\n\n\tthis.onMouseUp = function(e){\n\t\tif(this.isPressed()){\n\t\t\tthis.fireEvent(\"onSmileyButtonClicked\")\n\t\t\tthis.setSmile();\n\t\t}\n\t\treturn this;\n\t}.bind(this);\n\n\tthis.onMouseOut = function(e){\n\t\tif (!(this.state === \"facewin\" || this.state === \"facedead\")){\n\t\t\tthis.setSmile();\n\t\t}\n\t\treturn this;\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t\treturn this;\n\t}.bind(this);\n\n\t/////////// Constructor ////////////\n\tthis.eventHandlers = [];\n\tvar defaultState = \"facesmile\";\n\tthis.setState(defaultState);\n}\n\nexport default SmileyButtonModel;","import Timer from './timer-model.js';\nimport ThreeDigitCounterModel from './three-digit-counter-model.js';\nimport SmileyButtonModel from './smiley-button-model.js';\n\nvar MinesweeperHeaderModel = function(width, height, minesCnt){\n\n\tthis.setEventHandlers = function(){\n\t\tthis.childs.forEach( function(el){\n\t\t\t\tel.addEventHandler({\n\t\t\t\t\t\"onStateChanged\": this.fireEvent\n\t\t\t\t});\n\t\t\t}.bind(this)\n\t\t);\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\tthis.setEventHandlers = function(){\n\t\tthis.children.forEach( function(el){\n\t\t\t\tel.addEventHandler({\n\t\t\t\t\t\"onStateChanged\": this.fireEvent\n\t\t\t\t});\n\t\t\t}.bind(this)\n\t\t);\n\t\tthis.smileyButton.addEventHandler({\n\t\t\t\"onSmileyButtonClicked\": this.fireEvent\n\t\t});\n\n\t\tthis.timer.addEventHandler({\n\t\t\t\"onTimeChanged\": function(eventName, e, sender){\n\t\t\t\tthis.timeCounter.setNumber(sender.getTime())\n\t\t\t}.bind(this)\n\t\t});\n\t}.bind(this);\n\n\t/////////// Constructor ////////////\n\tthis.eventHandlers = [];\n\tthis.width = width;\n\tthis.height = height;\n\tthis.timer = new Timer();\n\tthis.minesCounter = new ThreeDigitCounterModel(minesCnt);\n\tthis.timeCounter = new ThreeDigitCounterModel();\n\tthis.smileyButton = new SmileyButtonModel();\n\tthis.children = [this.smileyButton, this.minesCounter, this.timeCounter];\n\tthis.setEventHandlers();\n\t\n\n}\n\t\nexport default MinesweeperHeaderModel;","import Matrix from './matrix.js';\n\nvar MinesweeperMinesFieldModel = function(width, height, minesCnt) {\n\n\tthis.init = function(x, y){\n\t\tthis.randomizeMines.bind(this)(this.minesCnt, x, y);\n\t\tthis.calculateNumbers.bind(this)();\n\t\tthis.fireEvent(\"onStateChanged\");\n\t\treturn this;\n\t}.bind(this);\n\n\tthis.randomizeMines = function(cnt, x, y) {\n\t\t\n\t\tvar shuffleArray = function(array) {\n\t  \tvar currentIndex = array.length, temporaryValue, randomIndex ;\n\t\t\twhile (0 !== currentIndex) {\n\t\t\t\trandomIndex = Math.floor(Math.random() * currentIndex);\n\t\t\t\tcurrentIndex -= 1;\n\t\t\t\ttemporaryValue = array[currentIndex];\n\t\t\t\tarray[currentIndex] = array[randomIndex];\n\t\t\t\tarray[randomIndex] = temporaryValue;\n\t\t\t}\n\t\t\treturn array;\n\t\t};\n\n\t\tthis.field.set(x, y, 'X');\n\t\tvar minesArr = new Array(this.field.size()-1);\n\t\tfor (let i = 0; i < cnt; i++){\n\t\t\tminesArr[i] = 'x';\n\t\t}\n\t\t\n\t\tminesArr = shuffleArray(minesArr);\n\t\tfor (let i = 0, m = 0; i < this.field.size(); i++) {\n\t\t\tif (this.field.getByIndex(i) !== 'X') {\n\t\t\t\tthis.field.setByIndex(i, minesArr[m++]);\n\t\t\t}\n\t\t}\n\t}.bind(this);\n\n\tthis.calculateNumbers = function(field) {\n\t\tfor(let x = 0; x < this.field.width; x++){\n\t\t\tfor(let y = 0; y < this.field.height; y++) if (this.field.get(x,y) !== 'x'){\n\t\t\t\tvar cnt = 0;\n\t\t\t\tif (this.field.get(x-1,y-1)==='x') cnt++;\n\t\t\t\tif (this.field.get(x-1,y  )==='x') cnt++;\n\t\t\t\tif (this.field.get(x-1,y+1)==='x') cnt++;\n\t\t\t\tif (this.field.get(x  ,y-1)==='x') cnt++;\n\t\t\t\tif (this.field.get(x  ,y+1)==='x') cnt++;\n\t\t\t\tif (this.field.get(x+1,y-1)==='x') cnt++;\n\t\t\t\tif (this.field.get(x+1,y  )==='x') cnt++;\n\t\t\t\tif (this.field.get(x+1,y+1)==='x') cnt++;\n\t\t\t\tthis.field.set(x,y,cnt);\n\t\t\t}\n\t\t}\n\t}.bind(this);\n\n\tthis.get = function(x, y){\n\t\treturn this.field.get(x,y);\n\t}.bind(this);\n\n\tthis.getByIndex = function(index){\n\t\treturn this.field.getByIndex(index);\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e, sender){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\t///////////// Constructor ///////////////\n\tthis.eventHandlers = [];\n\tthis.width = width;\n\tthis.height = height;\n\tthis.minesCnt = minesCnt;\n\tthis.field = new Matrix(width, height);\n}\n\nexport default MinesweeperMinesFieldModel;","import MinesweeperBoardModel from './minesweeper-board-model.js';\nimport MinesweeperHeaderModel from './minesweeper-header-model.js';\nimport MinesweeperMinesFieldModel from './minesweeper-mines-field-model.js';\n\nconst MinesweeperGameModel = function(gameSettings){\n\n\tthis.init = function(gameSettings){\n\t\tthis.gameSettings = gameSettings;\n\t\tthis.header = new MinesweeperHeaderModel(gameSettings.width, gameSettings.height, gameSettings.mines);\n\t\tthis.board = new MinesweeperBoardModel(gameSettings.width, gameSettings.height);\n\t\tthis.field = new MinesweeperMinesFieldModel(gameSettings.width, gameSettings.height, gameSettings.mines);\n\t\tthis.status=\"init\";\n\t\tthis.children = [this.header, this.board, this.field];\n\t\tthis.setEventHandlers();\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.setEventHandlers = function(){\n\t\tthis.children.forEach( function(el){\n\t\t\t\tel.addEventHandler({\n\t\t\t\t\t\"onStateChanged\": function(eventName, e, sender){\n\t\t\t\t\t\tthis.fireEvent(eventName, e, this);\n\t\t\t\t\t}.bind(this)\n\t\t\t\t});\n\t\t\t}.bind(this)\n\t\t);\n\t\tthis.header.addEventHandler({\n\t\t\t\"onSmileyButtonClicked\": function(){ \n\t\t\t\tthis.restartGame();\n\t\t\t}.bind(this)\n\t\t});\n\t}.bind(this);\n\n  \tthis.restartGame = function(settings){\n  \t\tif (typeof settings === 'undefined'){\n  \t\t\tsettings = this.gameSettings;\n  \t\t}\n  \t\tthis.init(settings);\n  \t}.bind(this);\n\n  \tthis.startGame = function(fx, fy){\n  \t\tthis.field = this.field.init(fx, fy);\n\t\tthis.status = 'started';\n\t\tthis.header.timer.start();\n\t\tthis.fireEvent(\"onStateChanged\");\n\t\treturn this.field;\n  \t}.bind(this);\n\n  \tthis.loseGame = function(board, x, y){\n  \t\tfor(let i = 0; i<board.width; i++){\n  \t\t\tfor(let j = 0; j<board.height; j++){\n  \t\t\t\tif (this.field.get(i,j)==='x'){\n  \t\t\t\t\tif(board.get(i,j).isFlagged()){\n  \t\t\t\t\t\tcontinue;\n  \t\t\t\t\t} else if (x === i && y === j) {\n  \t\t\t\t\t\tboard.get(i,j).setBombDeath();\n  \t\t\t\t\t} else {\n  \t\t\t\t\t\tboard.get(i,j).setBombRevealed();\n  \t\t\t\t\t}\n  \t\t\t\t} else if (board.get(i,j).isFlagged()){\n  \t\t\t\t\tboard.get(i,j).setBombMisflaged();\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t\tthis.status = 'lost';\n  \t\tthis.header.smileyButton.setDead();\n  \t\tthis.header.timer.stop();\n  \t\treturn board;\n  \t}.bind(this);\n\n  \tthis.winGame = function(board){\n  \t\tfor(let i = 0; i<board.getCells().size(); i++){\n  \t\t\tif (board.getByIndex(i).isBlank() && this.field.getByIndex(i)==='x')\n  \t\t\t\tboard.getByIndex(i).setFlagged();\n  \t\t}\n  \t\tthis.status = \"win\";\n  \t\tthis.header.smileyButton.setWin();\n  \t\tthis.header.timer.stop();\n  \t\treturn board;\n  \t}.bind(this);\n\n\tthis.onMouseUp = function(eventName, e, mouseController){\n\t\tlet s = \"\";\n\t\tthis.board.releasePressedCells();\n\t\tif (mouseController.isLeftButtonPressed()) s = s + \"L\";\n\t\tif (mouseController.isRightButtonPressed()) s = s + \"R\";\n\t\tthis.handleMouseAction(s, mouseController)\n\t}.bind(this);\n\n\tthis.onMouseDown = function(eventName, e, mouseController){\n\t\tif(mouseController.isLeftButtonPressed()){\n\t\t\tconst sender = mouseController.leftButtonPressedElement;\n\t\t\tconst c = this.getCordsOfCell(sender);\n\t\t\tif(!this.isGameOver()){\n\t\t\t\tif (mouseController.isRightButtonPressed()){\n\t\t\t\t\tthis.board.pressSquare(c.x, c.y);\n\t\t\t\t} else{\n\t\t\t\t\tif (this.board.get(c.x,c.y).getState() === 'blank'){\n\t\t\t\t\t\tthis.board.get(c.x,c.y).setPressed();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}.bind(this);\n\n\tthis.onMouseOut = function(eventName, e, mouseController){\n\t\tconst sender = e.target;\n\t\tconst c = this.getCordsOfField(sender);\n\t\tconst field = this.board.get(c.x, c.y);\n\t\tif (field.getState()==='pressed'){\n\t\t\tfield.setBlank();\n\t\t}\n\t}.bind(this);\n\n\tthis.onMouseOver = function(eventName, e, mouseController){\n\t\tconst sender = e.target;\n\t\tconst c = this.getCordsOfField(sender);\n\t\tconst field = this.board.get(c.x, c.y);\n\t\tif (mouseController.isLeftButtonPressed() && mouseController.isRightButtonPressed()){\n\t\t\tthis.board.pressSquare(c.x, c.y);\n\t\t} else if (field.getState()===\"blank\" && mouseController.isLeftButtonPressed()){\n\t\t\tfield.setPressed();\n\t\t}\t\t\n\t}.bind(this);\n\n\tthis.getCordsOfCell = function(field){\n\t\tconst coords = field.attributes[\"data\"].nodeValue.split(\"_\");\n\t\tconst x = parseInt(coords[0]), y = parseInt(coords[1]);\n\t\treturn {x:x,y:y};\n\t}\n\n\tthis.handleMouseAction = function(action, mouseController){\n\t\tif (action === \"\" || this.status === \"lost\" || this.status === \"win\") return;\n\t\tif (action === \"L\") {\n\t\t\tconst sender = mouseController.hostElement;\n\t\t\tconst c = this.getCordsOfCell(sender);\n\t\t\tthis.board = this.leftClickDone(this.field, this.board, c.x, c.y, false);\n\t\t}\n\t\tif (action === \"R\"){\n\t\t\tconst sender = mouseController.hostElement;\n\t\t\tconst c = this.getCordsOfCell(sender);\n\t\t\tthis.board = this.rightClickDone(this.field, this.board, c.x, c.y, false);\n\t\t}\n\t\tif (action === \"RL\" || action === \"LR\"){\n\t\t\tif (mouseController.leftButtonPressedElement === mouseController.rightButtonPressedElement){\n\t\t\t\tconst sender = mouseController.hostElement;\n\t\t\t\tmouseController.releaseButtons();\n\t\t\t\tconst c = this.getCordsOfCell(sender);\n\t\t\t\tthis.board = this.doubleClickDone(this.field, this.board, c.x, c.y, false);\n\t\t\t}\n\t\t}\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.leftClickDone = function(field, board, x, y, recursive){\n\t\tif (!board.isValidCoordinate(x,y)) {return board;}\n\n\t\tif (this.status === 'init' && !recursive){\n\t\t\tfield = this.startGame(x,y);\n\t\t}\n\n\t\tif (board.get(x,y).getState().startsWith(\"open\")) {return board;}\n\t\tif (board.get(x,y).getState() === \"blank\"){\n\t\t\tconst v = field.get(x,y);\n\t\t\tif ( v === 'x'){\n\t\t\t\tboard = this.loseGame(board,x,y);\n\t\t\t}\n\t\t\telse if (v === 0){\n\t\t\t\tboard.get(x,y).setOpen(v);\n\t\t\t\tboard.openCellsLeft--;\n\t\t\t\tboard = this.leftClickDone(field, board, x-1, y  , true);\n\t\t\t\tboard = this.leftClickDone(field, board, x+1, y  , true);\n\t\t\t\tboard = this.leftClickDone(field, board, x-1, y-1, true);\n\t\t\t\tboard = this.leftClickDone(field, board, x  , y-1, true);\n\t\t\t\tboard = this.leftClickDone(field, board, x+1, y-1, true);\n\t\t\t\tboard = this.leftClickDone(field, board, x-1, y+1, true);\n\t\t\t\tboard = this.leftClickDone(field, board, x  , y+1, true);\n\t\t\t\tboard = this.leftClickDone(field, board, x+1, y+1, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tboard.get(x,y).setOpen(v);\n\t\t\t\tboard.openCellsLeft--;\n\t\t\t}\n\t\t}\n\t\tif (this.status !== 'lost' && board.openCellsLeft === this.gameSettings.mines){\n\t\t\tboard = this.winGame(board);\n\t\t}\n\t\treturn board;\n\t}.bind(this);\n\n\tthis.rightClickDone = function(field ,board, x, y){\n\t\t// console.log(\"R\"+x+\",\"+y);\n\t\tif (board.get(x,y).isBlank()){\n\t\t\tboard.get(x,y).setFlagged();\n\t\t\tthis.header.minesCounter.decr();\n\t\t} else if (board.get(x,y).isFlagged()){\n\t\t\tboard.get(x,y).setBlank();\n\t\t\tthis.header.minesCounter.inc();\n\t\t}\n\t\tthis.fireEvent(\"onStateChanged\");\n\t\treturn board;\n\t}.bind(this);\n\n\tthis.doubleClickDone = function(field, board, x, y){\n\t\t// console.log(\"D\"+x+\",\"+y);\n\t\tif (board.get(x,y).isOpen()){\n\t\t\tif (board.get(x,y).getNumber() === board.numOfFlaggedCellsAround(x,y)){\n\t\t\t\tfor(let i = x-1; i <= x + 1; ++i){\n\t\t\t\t\tfor(let j = y-1; j <= y + 1; ++j){\n\t\t\t\t\t\tboard = this.leftClickDone(field, board, i, j,true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn board;\n\t}.bind(this);\n\n\tthis.isGameOver = function(){\n\t\treturn [\"win\",\"lost\"].indexOf(this.status) !== -1;\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e, sender){\n\t\tfor(let i = 0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tconst callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\t///////////// Constructor ///////////////\n\tthis.eventHandlers = [];\n\tthis.init(gameSettings);\n\n}\n\nexport default MinesweeperGameModel;","var MouseModel = function(){\n\n\tthis.setLeftButtonPressed = function(sender){\n\t\tthis.leftButtonPressedElement = sender;\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.setRightButtonPressed = function(sender){\n\t\tthis.rightButtonPressedElement = sender;\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.setHostElement = function(element){\n\t\tthis.hostElement = element;\n\t\tthis.fireEvent(\"onStateChanged\");\n\t}.bind(this);\n\n\tthis.releaseButtons = function(){\n\t\tthis.setLeftButtonPressed(null);\n\t\tthis.setRightButtonPressed(null);\n\t}.bind(this);\n\n\tthis.isLeftButtonPressed = function(){\n\t\treturn this.leftButtonPressedElement!=null;\n\t}.bind(this);\n\n\tthis.isRightButtonPressed = function(){\n\t\treturn this.rightButtonPressedElement!=null;\n\t}.bind(this);\n\n\tthis.catchMouseDown = function(e){\n\t\tif (e.nativeEvent.which === 1){\n\t\t\tthis.setLeftButtonPressed(e.target);\n\t\t}\n\t\tif (e.nativeEvent.which === 3){\n\t\t\tthis.setRightButtonPressed(e.target);\n\t\t}\n\t\tthis.fireEvent(\"mouseDown\",e);\n\t}.bind(this);\n\n\tthis.catchMouseUp = function(e){\n\t\tthis.fireEvent(\"mouseUp\", e);\n\t\tif (e.nativeEvent.which === 1){\n\t\t\tthis.setLeftButtonPressed(null);\n\t\t}\n\t\tif (e.nativeEvent.which === 2){\n\t\t\tthis.setMiddleButtonPressed(null);\n\t\t}\n\t\tif (e.nativeEvent.which === 3){\n\t\t\tthis.setRightButtonPressed(null);\n\t\t}\n\t\tthis.fireEvent(\"postMouseUp\", e);\n\t}.bind(this);\n\n\tthis.catchMouseOut = function(e){\n\t\tthis.fireEvent(\"mouseOut\", e);\n\t}.bind(this);\n\n\tthis.catchMouseOver = function(e){\n\t\tthis.setHostElement(e.target);\n\t\tthis.fireEvent(\"mouseOver\", e);\n\t}.bind(this);\n\n\tthis.fireEvent = function(eventName, e){\n\t\tfor(var i=0; i<this.eventHandlers.length; i++){\n\t\t\ttry{\n\t\t\t\tvar callback = this.eventHandlers[i][eventName];\n\t\t\t\tcallback(eventName, e, this);\t\n\t\t\t} catch(err) {}\n\t\t}\n\t}.bind(this);\n\n\tthis.addEventHandler = function(eventHandler){\n\t\tthis.eventHandlers.push(eventHandler);\n\t}.bind(this);\n\n\t///////////// Constructor ///////////////\n\tthis.hostElement = null;\n\tthis.leftButtonPressedElement = null;\n\tthis.rightButtonPressedElement = null;\n\tthis.eventHandlers = [];\n}\n\nexport default MouseModel;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { keys } from 'lodash';\nimport LevelSelector from './components/minesweeper-level-selector.js';\nimport MinesweeperGame from './components/minesweeper-game.js';\nimport MinesweeperGameModel from './model/minesweeper-game-model.js';\nimport MouseModel from './model/mouse-model.js';\nimport './css/minesweeper.css';\nimport 'bootstrap/dist/css/bootstrap.css';\n\n\nclass MinesweeperApp extends React.Component {\n\n  constructor(props) {\n    super();\n    this.setEventHandlers = this.setEventHandlers.bind(this);\n    this.onDifficultySelected = this.onDifficultySelected.bind(this);\n\n    var defaultLevel = \"easy\";\n    var game = new MinesweeperGameModel(this.levelsAvailable()[defaultLevel]);\n    var mouse = new MouseModel();\n    this.setEventHandlers(mouse, game);\n    this.state = {\n      game:game,\n      mouse: mouse,\n      selectedLevel: defaultLevel,\n      scores: { \"easy\":{}, \"intermediate\":{}, \"expert\":{}},\n\n    };\n  }\n\n  setEventHandlers(mouse, game){\n    mouse.addEventHandler({\n      mouseUp: game.onMouseUp,\n      mouseDown: game.onMouseDown,\n      mouseOut: game.onMouseOut,\n      mouseOver: game.onMouseOver,\n      onStateChanged: (eventName, e, sender) => { \n        this.setState({ mouse: sender });\n      },\n    });\n    mouse.addEventHandler({\n      mouseDown: (eventName, e, sender) => {\n        if (!this.state.game.isGameOver()){\n          this.state.game.header.smileyButton.setOoh();\n        }\n      },\n      mouseUp: (eventName, e, sender) => {\n        if (!this.state.game.isGameOver()){\n          this.state.game.header.smileyButton.setSmile();\n        }\n      },\n    });\n    game.addEventHandler({\n      onStateChanged: (eventName, e, sender) => {\n        this.setState({game: sender});\n      },\n    });\n  }\n\n  levelsAvailable(){\n    return {\n      \"easy\": {\n        \"mines\":10,\n        \"width\": 9,\n        \"height\": 9\n      },\n      \"intermediate\": {\n        \"mines\": 40,\n        \"width\": 16,\n        \"height\": 16\n      },\n      \"expert\" : {\n        \"mines\" :99,\n        \"width\": 30,\n        \"height\": 16\n      }\n    };\n  }\n\n  onDifficultySelected(dif){\n    this.setState({ selectedLevel: dif });\n    this.state.game.restartGame(\n      this.levelsAvailable()[dif]\n    );\n  }\n\n  calcStyle(settings){\n    var fieldWidth = 16, borderWidth = 10;\n    return {\n      \"width\": fieldWidth * settings.width + 2 * borderWidth,\n      \"height\": fieldWidth * settings.height\n    }\n  }\n\n  render() {\n    const { game, mouse, selectedLevel } = this.state;\n    return (\n      <div>\n        <div className=\"row\" >\n          <div className=\"col-xs-6 z100\">\n            <LevelSelector choices={keys(this.levelsAvailable())} \n                selectedChoice={selectedLevel}\n                innitGameCallback={this.onDifficultySelected} />\n            <MinesweeperGame game={game} mouse={mouse}/>\n          </div>\n        </div>  \n      </div>  \n    );\n  } \n}\n\nReactDOM.render(<MinesweeperApp />, document.getElementById('root'));\n"],"sourceRoot":""}